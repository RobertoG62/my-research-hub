<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Research Hub 3.0 | Clean Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: { 50: '#f0f9ff', 100: '#e0f2fe', 500: '#0ea5e9', 600: '#0284c7', 700: '#0369a1', 900: '#0c4a6e' }
                    },
                    fontFamily: { sans: ['Rubik', 'sans-serif'] }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Rubik', sans-serif; background: #f8fafc; }
        .glass-panel {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        .history-item { transition: all 0.2s; border-right: 3px solid transparent; }
        .history-item:hover { background: #f1f5f9; border-right-color: #0ea5e9; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        
        /* Focus Animation */
        @keyframes pulse-ring {
            0% { box-shadow: 0 0 0 0 rgba(14, 165, 233, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(14, 165, 233, 0); }
            100% { box-shadow: 0 0 0 0 rgba(14, 165, 233, 0); }
        }
        .pulse-focus:focus { animation: pulse-ring 1s cubic-bezier(0.4, 0, 0.6, 1); }
    </style>
</head>
<body class="text-slate-800 min-h-screen flex flex-col">

    <header class="bg-slate-900 text-white p-4 shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-sky-600 p-2 rounded-lg shadow-inner"><i class="fas fa-search-location text-xl"></i></div>
                <div>
                    <h1 class="text-xl font-bold tracking-wide">Deep Research Hub <span class="text-sky-400 text-sm font-normal">v3.0 Clean</span></h1>
                    <p class="text-slate-400 text-xs">מחולל פרומפטים סטרילי ומקצועי</p>
                </div>
            </div>
            <div class="flex gap-3 text-sm">
                <div class="px-3 py-1 bg-slate-800 rounded-full border border-slate-700">
                    <span id="historyCount">0</span> מחקרים בארכיון
                </div>
                <button onclick="clearHistory()" class="text-slate-400 hover:text-red-400 transition" title="נקה היסטוריה">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
    </header>

    <div class="flex-1 max-w-7xl mx-auto w-full p-4 md:p-6 grid grid-cols-1 lg:grid-cols-12 gap-6">
        
        <aside class="lg:col-span-3 glass-panel rounded-2xl p-4 flex flex-col h-[calc(100vh-140px)] sticky top-24">
            <h3 class="font-bold text-slate-700 mb-4 flex items-center gap-2">
                <i class="fas fa-history text-sky-500"></i> מחקרים אחרונים
            </h3>
            <div id="historyList" class="flex-1 overflow-y-auto space-y-2 pr-1">
                <div class="text-center text-slate-400 text-sm mt-10">ההיסטוריה ריקה</div>
            </div>
        </aside>

        <main class="lg:col-span-9 space-y-6">
            
            <div class="glass-panel rounded-2xl p-6 md:p-8">
                <div class="flex items-center gap-3 mb-6 border-b border-slate-100 pb-4">
                    <span class="bg-sky-100 text-sky-700 w-8 h-8 rounded-full flex items-center justify-center font-bold">1</span>
                    <h2 class="text-xl font-bold text-slate-800">הגדרת נושא המחקר</h2>
                </div>

                <div class="grid grid-cols-1 gap-6 mb-4">
                    <div>
                        <label class="block text-sm font-bold text-slate-600 mb-2">מה הנושא שברצונך לחקור?</label>
                        <textarea id="topic" rows="3" 
                            class="w-full p-4 bg-white border border-slate-300 rounded-xl focus:border-sky-500 focus:ring-2 focus:ring-sky-100 outline-none transition text-lg shadow-sm pulse-focus"
                            placeholder="לדוגמה: השפעת מחשוב קוונטי על אבטחת מידע בנקאית..."></textarea>
                    </div>
                </div>
                
                <button onclick="generateCleanPrompt()" 
                    class="w-full mt-2 bg-slate-800 hover:bg-slate-900 text-white font-bold py-4 rounded-xl shadow-lg transition transform active:scale-[0.99] flex items-center justify-center gap-2 text-lg">
                    <i class="fas fa-microchip"></i>
                    צור פרומפט מחקר (נקי ומקצועי)
                </button>
            </div>

            <div class="glass-panel rounded-2xl p-6 md:p-8 flex flex-col h-[600px]">
                <div class="flex justify-between items-center mb-4 border-b border-slate-100 pb-4">
                    <div class="flex items-center gap-3">
                        <span class="bg-green-100 text-green-700 w-8 h-8 rounded-full flex items-center justify-center font-bold">2</span>
                        <h2 class="text-xl font-bold text-slate-800">הפרומפט המוכן (להעתקה)</h2>
                    </div>
                    <button onclick="copyText()" class="text-sky-600 hover:bg-sky-50 px-4 py-2 rounded-lg transition font-bold flex items-center gap-2 border border-sky-100">
                        <i class="far fa-copy"></i> העתק ללוח
                    </button>
                </div>
                
                <textarea id="output" readonly 
                    class="flex-1 w-full p-5 bg-slate-50 border border-slate-200 rounded-xl font-mono text-sm leading-relaxed resize-none focus:outline-none text-slate-700 dir-ltr"
                    placeholder="הפרומפט יופיע כאן..."></textarea>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3">
                <button onclick="openLink('https://claude.ai/new')" class="p-3 bg-white border rounded-xl hover:border-orange-500 font-bold text-slate-600 shadow-sm">Claude</button>
                <button onclick="openLink('https://gemini.google.com/app')" class="p-3 bg-white border rounded-xl hover:border-blue-500 font-bold text-slate-600 shadow-sm">Gemini</button>
                <button onclick="openLink('https://chatgpt.com/')" class="p-3 bg-white border rounded-xl hover:border-green-500 font-bold text-slate-600 shadow-sm">ChatGPT</button>
                <button onclick="openLink('https://www.perplexity.ai/')" class="p-3 bg-white border rounded-xl hover:border-teal-500 font-bold text-slate-600 shadow-sm">Perplexity</button>
                <button onclick="openLink('https://grok.com/')" class="p-3 bg-white border rounded-xl hover:border-gray-800 font-bold text-slate-600 shadow-sm">Grok</button>
                <button onclick="openLink('https://notebooklm.google.com/')" class="p-3 bg-white border rounded-xl hover:border-yellow-500 font-bold text-slate-600 shadow-sm">NotebookLM</button>
            </div>
            
            <button onclick="openAll()" class="w-full py-3 bg-sky-600 text-white rounded-xl hover:bg-sky-700 font-bold shadow-md transition flex items-center justify-center gap-2">
                <i class="fas fa-external-link-alt"></i> פתח את כל הכלים במקביל
            </button>
        </main>
    </div>

    <script>
        // === State ===
        const STORAGE_KEY = 'clean_research_v3';
        let history = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

        document.addEventListener('DOMContentLoaded', () => {
            renderHistory();
        });

        // === The Logic (Pure & Isolated) ===
        function generateCleanPrompt() {
            const topic = document.getElementById('topic').value.trim();
            const output = document.getElementById('output');

            if (!topic) {
                alert('נא להזין נושא למחקר');
                return;
            }

            // תבנית הפרומפט - נקייה לחלוטין מהיסטוריה
            // מבוססת על ההנחיות בקובץ "מחקר עומק" שצורף
            const template = `You are an expert Deep Research Analyst with elite web-browsing capabilities.
Your task is to conduct a comprehensive, high-quality deep dive into the following topic:

>> TOPIC: "${topic}" <<

### Core Instructions (Web-Based Research):
1. **Credibility First:** Rely only on high-authority, reliable sources. Verify facts across multiple sources.
2. **Comprehensive Coverage:** Cover historical context, current state (2024-2025), and future projections.
3. **Data & Trends:** Look for specific statistics, market trends, and significant shifts.
4. **Timeframes:** Clearly indicate the relevant time periods for the data you find.

### Output Requirements:
- **Language:** The research may be conducted in any language, but the **FINAL OUTPUT MUST BE IN HEBREW (עברית)**.
- **Structure:** Use clear headings, bullet points, and a professional layout.
- **Accessibility:** Explain complex concepts in simple, accessible language (Professional yet clear).

### Execution Plan:
- Step 1: Broad search to understand the landscape.
- Step 2: Deep dive into specific sub-topics and controversies.
- Step 3: Synthesis of information into a coherent report in Hebrew.

**Final Note:** Do not limit yourself. If you find related tangents or crucial information that I didn't explicitly ask for but is relevant to a complete understanding of the topic, please include it. Give yourself the freedom to explore and bring the best possible insights.`;

            output.value = template;
            output.scrollTop = 0;
            
            addToHistory(topic, template);
        }

        // === Utilities ===
        function addToHistory(topic, prompt) {
            const newItem = {
                id: Date.now(),
                topic,
                prompt,
                date: new Date().toLocaleDateString('he-IL')
            };
            history.unshift(newItem);
            if(history.length > 15) history.pop(); // Limit history
            localStorage.setItem(STORAGE_KEY, JSON.stringify(history));
            renderHistory();
        }

        function renderHistory() {
            const list = document.getElementById('historyList');
            document.getElementById('historyCount').innerText = history.length;
            
            if (history.length === 0) {
                list.innerHTML = '<div class="text-center text-slate-400 text-sm mt-10">אין היסטוריה עדיין</div>';
                return;
            }

            list.innerHTML = history.map(item => `
                <div onclick="loadItem(${item.id})" class="history-item p-3 cursor-pointer rounded-lg bg-white border border-slate-100 shadow-sm mb-2 group">
                    <div class="font-bold text-slate-700 text-sm truncate">${item.topic}</div>
                    <div class="text-xs text-slate-400 mt-1">${item.date}</div>
                </div>
            `).join('');
        }

        function loadItem(id) {
            const item = history.find(h => h.id === id);
            if (!item) return;
            document.getElementById('topic').value = item.topic;
            document.getElementById('output').value = item.prompt;
        }

        function clearHistory() {
            if(confirm("למחוק היסטוריה?")) {
                history = [];
                localStorage.removeItem(STORAGE_KEY);
                renderHistory();
            }
        }

        function copyText() {
            const el = document.getElementById('output');
            if(!el.value) return;
            el.select();
            navigator.clipboard.writeText(el.value).then(() => {
                alert('הועתק ללוח!');
            });
        }

        function openLink(url) { window.open(url, '_blank'); }

        function openAll() {
            const urls = [
                'https://claude.ai/new', 
                'https://gemini.google.com/app', 
                'https://chatgpt.com/', 
                'https://www.genspark.ai/', 
                'https://grok.com/',
                'https://notebooklm.google.com/',
                'https://www.perplexity.ai/'
            ];
            if(confirm("זה יפתח 7 לשוניות במקביל. להמשיך?")) {
                urls.forEach(url => window.open(url, '_blank'));
            }
        }
    </script>
</body>
</html>
